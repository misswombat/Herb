<div class="create-issue">

  <!-- Form progress wizard -->
  <div class="create-issue__progress-wizard">
    <app-progress-wizard [currentStep]="currentStep" [steps]="formSteps" (onStepChange)="onStepChange($event)">
    </app-progress-wizard>
  </div>

  <form name="create-issue-form">
    <div class="create-issue__form" [ngStyle]="{ 'height': parentHeight }">

      <!-- Step 1 -->
      <div class="create-issue__form-step create-issue__form-step--1" [ngClass]="getStepClasses(1)" #child1>
        <h2>{{ formSteps[0].title }}</h2>
        <h6>Tell us who you are</h6>

        <div class="create-issue__question-container">
          <div class="create-issue__question">
            <div class="create-issue__question--number">1</div>
            <div class="create-issue__question--text">Are you the primary contact?</div>
          </div>
          <div class="create-issue__answer">
            <mat-radio-group class="create-issue__radio-group" name="primary-contact"
              [(ngModel)]="userResponse.areYouPrimaryContact" (change)="readjustParentHeight()">
              <mat-radio-button [value]="true">Yes</mat-radio-button>
              <mat-radio-button [value]="false">No</mat-radio-button>
            </mat-radio-group>

            <div class="create-issue__dependent"
              [ngClass]="{ 'create-issue__dependent--reveal': this.userResponse.areYouPrimaryContact === true || this.userResponse.areYouPrimaryContact === false }">
              <mat-form-field class="create-issue__input-text">
                <input matInput [placeholder]="userResponse.areYouPrimaryContact ? 'Email address' : 'Provide an alternative email address'" type="email" name="primary-contact"
                  [(ngModel)]="userResponse.primaryContact">
              </mat-form-field>
            </div>

          </div>
        </div>

        <div class="create-issue__question-container">
          <div class="create-issue__question">
            <div class="create-issue__question--number">2</div>
            <div class="create-issue__question--text">Would you like to provide an escalation contact?</div>
          </div>
          <div class="create-issue__answer">
            <mat-radio-group class="create-issue__radio-group" name="escalation-contact"
              [(ngModel)]="userResponse.isEscalationContactAvailable" (change)="readjustParentHeight()">
              <mat-radio-button [value]="true">Yes</mat-radio-button>
              <mat-radio-button [value]="false">No</mat-radio-button>
            </mat-radio-group>

            <div class="create-issue__dependent"
              [ngClass]="{ 'create-issue__dependent--reveal': userResponse.isEscalationContactAvailable }">
              <mat-form-field class="create-issue__input-text">
                <input matInput placeholder="Email" type="email" name="escalation-contact"
                  [(ngModel)]="userResponse.escalationContact">
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="create-issue__question-container">
          <div class="create-issue__question">
            <div class="create-issue__question--number">3</div>
            <div class="create-issue__question--text">Where does this issue primarily occur?</div>
          </div>
          <div class="create-issue__answer">
            <mat-radio-group class="create-issue__radio-group" name="issue-region"
              [(ngModel)]="userResponse.issueRegion">
              <mat-radio-button [value]="region" *ngFor="let region of getIssueRegions()">{{ region }}
              </mat-radio-button>
            </mat-radio-group>
          </div>
        </div>

        <div class="create-issue__question-container">
          <div class="create-issue__question">
            <div class="create-issue__question--number">4</div>
            <div class="create-issue__question--text">Please add a legal entity</div>
          </div>
          <div class="create-issue__answer">
            <!-- TODO: Convert to search field -->
            <mat-form-field class="create-issue__input-text">
              <input matInput placeholder="Search entities using Aminet code or start typing" type="email" name="legal-entity"
                [(ngModel)]="userResponse.legalEntity">
            </mat-form-field>
          </div>
        </div>

        <div class="create-issue__actions">
          <button mat-raised-button color="accent" (click)="onSaveAsDraftClick()">Save as draft</button>
          <button mat-raised-button color="primary" (click)="onNextClick()">Next section</button>
        </div>

      </div>

      <!-- Step 2 -->
      <div class="create-issue__form-step create-issue__form-step--2" [ngClass]="getStepClasses(2)" #child2>
        <h2>{{ formSteps[1].title }}</h2>

        <mat-divider></mat-divider>

        <br /><br /><br />

        <button mat-raised-button color="warn" (click)="onPreviousClick()">Previous</button>

        &nbsp;&nbsp;&nbsp;

        <button mat-raised-button color="primary" (click)="onNextClick()">Next</button>
      </div>

      <!-- Step 3 -->
      <div class="create-issue__form-step create-issue__form-step--3" [ngClass]="getStepClasses(3)" #child3>
        <h2>{{ formSteps[2].title }}</h2>

        <mat-divider></mat-divider>

        <br /><br /><br />

        <button mat-raised-button color="warn" (click)="onPreviousClick()">Previous</button>

        &nbsp;&nbsp;&nbsp;

        <button mat-raised-button color="primary" (click)="onNextClick()">Next</button>
      </div>

      <!-- Step 4 -->
      <div class="create-issue__form-step create-issue__form-step--4" [ngClass]="getStepClasses(4)" #child4>
        <h2>{{ formSteps[3].title }}</h2>

        <mat-divider></mat-divider>

        <br /><br /><br />

        <button mat-raised-button color="warn" (click)="onPreviousClick()">Previous</button>

        &nbsp;&nbsp;&nbsp;

        <button mat-raised-button color="primary" (click)="onNextClick()">Next</button>
      </div>

      <!-- Step 5 -->
      <div class="create-issue__form-step create-issue__form-step--5" [ngClass]="getStepClasses(5)" #child5>
        <h2>{{ formSteps[4].title }}</h2>

        <mat-divider></mat-divider>

        <br /><br /><br />

        <button mat-raised-button color="warn" (click)="onPreviousClick()">Previous</button>

        &nbsp;&nbsp;&nbsp;

        <button mat-raised-button color="accent" (click)="onSubmitClick()">Submit</button>
      </div>
    </div>
  </form>

</div>
